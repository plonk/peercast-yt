{^define LAYOUT layout.html}
{^define TITLE}
{#Channel Information} - {#PeerCast on} {^SERVER_NAME}
{^end}

<div class="reloader" data-url="?id={$page.channel.id}&amp;fragment=content" data-interval="{$servMgr.refreshHTML}">
  {@fragment content}
  {@if page.channel.exist}
  <div class="hscroll">
  <TABLE border=0 class="table-panel">
    <TBODY>
      <TR align=middle class="normal">
        <TD colSpan=2><B>{#Channel Information}</B></TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Name}</th>
        <TD>{$page.channel.name}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Genre}</th>
        <TD>{$page.channel.genre}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Desc.}</th>
        <TD>{$page.channel.desc}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#URL}</th>
        <TD class="break-word">
          <A href="/admin?cmd=redirect&amp;url={$page.channel.contactURL}"
             target=_blank>{$page.channel.contactURL}</A>
        </TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Comment}</th>
        <TD>{$page.channel.comment}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#ID}</th>
        <TD>{$page.channel.id}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Type}</th>
        <TD>{$page.channel.typeLong}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Bitrate}</th>
        <TD>{$page.channel.bitrate} kb/s
        </TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Source}</th>
        <TD>{$page.channel.sourceType} - {$page.channel.sourceProtocol} - {$page.channel.srcrate} kb/s<BR>
          {$page.channel.sourceURL}
        </TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#_Uptime_relayinfo}</th>
        <TD>{$page.channel.uptime}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Status}</th>
        <TD>{$page.channel.status}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#IP Version}</th>
        <TD>{$page.channel.ipVersion}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Position}</th>
        <TD>{$page.channel.streamPos}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Head}</th>
        <TD>{$page.channel.headPos} ({$page.channel.headLen} {#bytes}) <a href="head.html?id={$page.channel.id}">{#View}</a></TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Buffer}</th>
        <TD><pre style="font-family: sans-serif; margin-bottom: 0">{$page.channel.buffer}</pre></TD>
      </TR>
      <TR class="heading-row normal">
        <TD colSpan=2 align=middle><B>{#Current Track}</B></TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Artist}</th>
        <TD>{$page.channel.track.artist}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Title}</th>
        <TD>{$page.channel.track.title}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Album}</th>
        <TD>{$page.channel.track.album}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Genre}</th>
        <TD>{$page.channel.track.genre}</TD>
      </TR>
      <TR class="normal">
        <th class="left-heading">{#Contact}</th>
        <TD>{$page.channel.track.contactURL}</TD>
      </TR>
    </TBODY>
  </TABLE>
  </div>

  <TABLE class="table-panel">
    <TBODY>
      <TR align=middle class="normal">
        <TD colSpan=5><B>{#Connections}</B></TD>
      </TR>
      <TR align=middle class="normal" style="white-space: nowrap">
        <TD><B>{#_Type_connection}</B></TD>
        <TD><B>{#Time}</B></TD>
        <TD style="width: 11.5em"><B>{#IP}</B></TD>
        <TD><B>{#Kbits/s}</B></TD>
        <td><b>{#Stop}</b></td>
      </TR>
      {@loop servMgr.numServents}
        {@if page.channel.id == loop.servent.chanID}          
          <tr class="normal">
            <TD>{$loop.servent.type}</TD>
            <TD>{$loop.servent.uptime}</TD>
            <TD class="break-word"><a href="ip.html?">{$loop.servent.address}</a></TD>
            <TD align=right>{$loop.servent.bitrate}</TD>
            <td style="text-align: center"><a class="text-danger" href="/admin?cmd=stop_servent&amp;servent_id={$loop.servent.id}">&#x23f9;<!-- BLACK SQUARE FOR STOP --></a></td>
          </TR>
        {@end}
      {@end}
    </TBODY>
  </TABLE>

  <div class="hscroll" style="width:100%">
    <TABLE class="table-panel" border=0>
      <TBODY>
      <TR align=middle class="normal">
        <TD colSpan=9><B>{#Known Hosts}</B></TD>
      </TR>
	<TR align=middle class="normal">
          <th colspan="2">{#IP:Port}</th>
          <th>{#Hops}</th>
          <th>{#Listeners}</th>
          <th>{#Relays}</th>
          <th style="min-width: 8.5em">{#_Uptime_relayinfo}</th>
          <th>{#_Firewalled_relayinfo}</th>
          <th>{#_Agent_relayinfo}</th>
          <th style="min-width: 7.5em">{#Update}</th>
	</TR>
	{@loop page.channel.numHits}
	<tr class="normal" bgcolor={@if loop.indexEven}#eee{@else}#ddd{@end}>
          <td align="left" style="{@if loop.hit.tracker}font-weight: bold;{@end}">
            <a href="/admin?cmd=bump&amp;id={$page.channel.id}&amp;ip={$loop.hit.rhost0}">
              {$loop.hit.rhost0}
            </a>
          </td>
          <td align="left">{$loop.hit.rhost1}</td>
          <TD class="numeric">{$loop.hit.numHops}</TD>
          <TD class="numeric">{$loop.hit.numListeners}</TD>
          <TD class="numeric">{$loop.hit.numRelays}</TD>
          <TD class="numeric">{$loop.hit.uptime}</TD>
          <TD nowrap>{@if loop.hit.isFirewalled}{#Yes}{@else}{#No}{@end}</TD>
          <TD class="numeric">{$loop.hit.version}</TD>
          <TD class="numeric">{$loop.hit.update}</TD>
	</TR>
	{@end}
      </TBODY>
    </TABLE>
  </div>

  {@else}
  <p class="normal" style="text-align: center">
    {#Channel not found.}
  </p>
  {@end}
  {@end}
</div>
